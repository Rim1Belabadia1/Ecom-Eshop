{"ast":null,"code":"import Cart from\"../Components/Cart\";import{useLoaderData,json,redirect}from\"react-router-dom\";import{getAuthToken}from\"../util/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";function CartPage(){const cartItems=useLoaderData();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Cart,{cartItems:cartItems})});}export default CartPage;export async function loader(_ref){let{request,params}=_ref;const token=getAuthToken();const productId=params.id;console.log(\"product in loder..\"+productId);let url='';if(productId>0){url=process.env.REACT_APP_BASEURL+'addCart?id='+productId;}else{url=process.env.REACT_APP_BASEURL+'cartsByUser';}const response=await fetch(url,{method:'GET',headers:{'Authorization':'Bearer '+token}});console.log(\"response: \"+response);if(!response.ok){//  console.log(\"Res:\" +response.message);\n// throw json({message: 'Could not fetch event.'}, {status: response.status, statusText: response.statusText});\nalert(\"Product is already in cart\");return redirect('/productlist');}else{const resData=await response.json();console.log(\"Res else:\"+response.message);//  console.log(\"Response Data...  : \"+resData.carts[0].productName);\nconsole.log(\"Res Data:\"+resData);return resData.carts;}}","map":{"version":3,"names":["Cart","useLoaderData","json","redirect","getAuthToken","jsx","_jsx","CartPage","cartItems","children","loader","_ref","request","params","token","productId","id","console","log","url","process","env","REACT_APP_BASEURL","response","fetch","method","headers","ok","alert","resData","message","carts"],"sources":["C:/Users/User/Desktop/eCom in SB and ReactJS/Frontend/ecom/src/Pages/CartPage.js"],"sourcesContent":["import Cart from \"../Components/Cart\";\r\nimport { useLoaderData, json, redirect } from \"react-router-dom\";\r\nimport { getAuthToken } from \"../util/auth\";\r\n\r\nfunction CartPage(){\r\n\r\n    const cartItems = useLoaderData();\r\n\r\n    return(\r\n        <div>\r\n            <Cart cartItems = {cartItems}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CartPage;\r\n\r\n\r\nexport async function loader({request, params}){\r\n    const token = getAuthToken();\r\n    const productId = params.id; \r\n    console.log(\"product in loder..\" +productId);\r\n    let url = '';\r\n    if(productId>0){\r\n        url = process.env.REACT_APP_BASEURL+'addCart?id='+productId\r\n    }else{\r\n        url = process.env.REACT_APP_BASEURL+'cartsByUser'\r\n    }\r\n   \r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token,\r\n          \r\n        }\r\n        \r\n    });\r\n\r\n    console.log(\"response: \" +response);\r\n\r\n    if(!response.ok){\r\n      //  console.log(\"Res:\" +response.message);\r\n        // throw json({message: 'Could not fetch event.'}, {status: response.status, statusText: response.statusText});\r\n        alert(\"Product is already in cart\")\r\n    return redirect('/productlist');\r\n     \r\n    \r\n    \r\n    }else{\r\n        const resData = await response.json();\r\n        console.log(\"Res else:\" +response.message);\r\n      //  console.log(\"Response Data...  : \"+resData.carts[0].productName);\r\n        console.log(\"Res Data:\" +resData);\r\n        return resData.carts;\r\n    }\r\n\r\n}"],"mappings":"AAAA,MAAO,CAAAA,IAAI,KAAM,oBAAoB,CACrC,OAASC,aAAa,CAAEC,IAAI,CAAEC,QAAQ,KAAQ,kBAAkB,CAChE,OAASC,YAAY,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,QAAS,CAAAC,QAAQA,CAAA,CAAE,CAEf,KAAM,CAAAC,SAAS,CAAGP,aAAa,CAAC,CAAC,CAEjC,mBACIK,IAAA,QAAAG,QAAA,cACIH,IAAA,CAACN,IAAI,EAACQ,SAAS,CAAIA,SAAU,CAAC,CAAC,CAC9B,CAAC,CAEd,CAEA,cAAe,CAAAD,QAAQ,CAGvB,MAAO,eAAe,CAAAG,MAAMA,CAAAC,IAAA,CAAmB,IAAlB,CAACC,OAAO,CAAEC,MAAM,CAAC,CAAAF,IAAA,CAC1C,KAAM,CAAAG,KAAK,CAAGV,YAAY,CAAC,CAAC,CAC5B,KAAM,CAAAW,SAAS,CAAGF,MAAM,CAACG,EAAE,CAC3BC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEH,SAAS,CAAC,CAC5C,GAAI,CAAAI,GAAG,CAAG,EAAE,CACZ,GAAGJ,SAAS,CAAC,CAAC,CAAC,CACXI,GAAG,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAAC,aAAa,CAACP,SAAS,CAC/D,CAAC,IAAI,CACDI,GAAG,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAAC,aAAa,CACrD,CAEA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACL,GAAG,CAAE,CAC9BM,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,CAAE,SAAS,CAAGZ,KAE/B,CAEJ,CAAC,CAAC,CAEFG,OAAO,CAACC,GAAG,CAAC,YAAY,CAAEK,QAAQ,CAAC,CAEnC,GAAG,CAACA,QAAQ,CAACI,EAAE,CAAC,CACd;AACE;AACAC,KAAK,CAAC,4BAA4B,CAAC,CACvC,MAAO,CAAAzB,QAAQ,CAAC,cAAc,CAAC,CAI/B,CAAC,IAAI,CACD,KAAM,CAAA0B,OAAO,CAAG,KAAM,CAAAN,QAAQ,CAACrB,IAAI,CAAC,CAAC,CACrCe,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEK,QAAQ,CAACO,OAAO,CAAC,CAC5C;AACEb,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEW,OAAO,CAAC,CACjC,MAAO,CAAAA,OAAO,CAACE,KAAK,CACxB,CAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}