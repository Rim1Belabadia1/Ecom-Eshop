{"ast":null,"code":"import{Form}from'react-router-dom';import{json,redirect}from'react-router-dom';import{getAuthToken}from\"../util/auth\";import{useActionData}from'react-router-dom';import{getUserData}from\"../util/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Payment(_ref){let{method,totalPrice}=_ref;const user=getUserData();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{className:\"gradient-custom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container my-5 py-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center py-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 col-lg-5 col-xl-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center h1 fw-bold mb-1 mx-1 mx-md-1 mt-1\",children:\"Payment\"}),/*#__PURE__*/_jsxs(Form,{method:method,children:[/*#__PURE__*/_jsx(\"input\",{id:\"id\",type:\"hidden\",name:\"id\",required:true,defaultValue:user?user.id:''}),/*#__PURE__*/_jsx(\"input\",{id:\"id\",type:\"hidden\",name:\"username\",required:true,defaultValue:user?user.username:''}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"typeText\",name:\"cardNumber\",className:\"form-control form-control-lg\",placeholder:\"1234 5678 9012 3457\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Card Number\"})]}),/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/color/48/000000/visa.png\",alt:\"visa\",width:\"64px\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"typeName\",name:\"cardHolderName\",className:\"form-control form-control-lg\",placeholder:\"Cardholder's Name\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Cardholder's Name\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center pb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"typeExp\",name:\"expiryDate\",className:\"form-control form-control-lg\",placeholder:\"MM/YYYY\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Expiration\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"typeText2\",name:\"cvv\",className:\"form-control form-control-lg\",placeholder:\"\\u25CF\\u25CF\\u25CF\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Cvv\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"typeText2\",name:\"totalPrice\",className:\"form-control form-control-lg\",value:totalPrice}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Total Price\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-info btn-lg btn-rounded\",children:\"Pay\"})})]})]})})})})})})});}export default Payment;export async function action(_ref2){let{request}=_ref2;const method=request.method;const data=await request.formData();const token=getAuthToken();let userData={userId:data.get('id'),cardNumber:data.get('cardNumber'),cardHolderName:data.get('cardHolderName'),expiryDate:data.get('expiryDate'),cvv:data.get('cvv'),totalPrice:data.get('totalPrice')};console.log(\"JSON.stringify(eventData): \"+JSON.stringify(userData));let url=process.env.REACT_APP_BASEURL+'AddPayment';console.log(\"method: \"+method);console.log(\"URK: \"+url);console.log(\"userData: \"+JSON.stringify(userData));var config={};if(token){config={'Content-Type':'application/json','Authorization':'Bearer '+token};}else{config={'Content-Type':'application/json'};}const response=await fetch(url,{method:method,headers:config,body:JSON.stringify(userData)});if(!response.ok){throw json({message:'Could not create User'},{status:500});}else{if(token){const resData=await response.json();alert(\"Payment Done\");return redirect('/productlist');}else{return redirect('/login');}}}","map":{"version":3,"names":["Form","json","redirect","getAuthToken","useActionData","getUserData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Payment","_ref","method","totalPrice","user","children","className","id","type","name","required","defaultValue","username","placeholder","src","alt","width","value","action","_ref2","request","data","formData","token","userData","userId","get","cardNumber","cardHolderName","expiryDate","cvv","console","log","JSON","stringify","url","process","env","REACT_APP_BASEURL","config","response","fetch","headers","body","ok","message","status","resData","alert"],"sources":["C:/Users/User/Desktop/eCom in SB and ReactJS/Frontend/ecom/src/Components/Payment.js"],"sourcesContent":["import { Form } from 'react-router-dom';\r\nimport { json, redirect } from 'react-router-dom'\r\nimport { getAuthToken } from \"../util/auth\";\r\nimport { useActionData } from 'react-router-dom';\r\nimport {getUserData} from \"../util/auth\";\r\nfunction Payment({method, totalPrice}){\r\n    const user = getUserData();\r\n    return(\r\n        <>\r\n<section className=\"gradient-custom\">\r\n  <div className=\"container my-5 py-5\">\r\n    <div className=\"row d-flex justify-content-center py-5\">\r\n      <div className=\"col-md-1 col-lg-5 col-xl-4\">\r\n        <div className=\"card\" >\r\n          <div className=\"card-body p-4\">\r\n          <p className=\"text-center h1 fw-bold mb-1 mx-1 mx-md-1 mt-1\">Payment</p>\r\n            <Form method={method}>\r\n          \r\n            <input id=\"id\" type=\"hidden\" name=\"id\" required defaultValue={user ? user.id : ''} />\r\n            <input id=\"id\" type=\"hidden\" name=\"username\" required defaultValue={user ? user.username : ''} />\r\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <div className=\"form-outline\">\r\n                  <input type=\"text\" id=\"typeText\" name='cardNumber' className=\"form-control form-control-lg\"\r\n                    placeholder=\"1234 5678 9012 3457\" />\r\n                  <label className=\"form-label\" >Card Number</label>\r\n                </div>\r\n                <img src=\"https://img.icons8.com/color/48/000000/visa.png\" alt=\"visa\" width=\"64px\" />\r\n              </div>\r\n\r\n              <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <div className=\"form-outline\">\r\n                  <input type=\"text\" id=\"typeName\" name='cardHolderName' className=\"form-control form-control-lg\"\r\n                    placeholder=\"Cardholder's Name\" />\r\n                  <label className=\"form-label\" >Cardholder's Name</label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"d-flex justify-content-between align-items-center pb-2\">\r\n                <div className=\"form-outline\">\r\n                  <input type=\"text\" id=\"typeExp\" name='expiryDate' className=\"form-control form-control-lg\" placeholder=\"MM/YYYY\"  />\r\n                  <label className=\"form-label\" >Expiration</label>\r\n                </div>\r\n                <div className=\"form-outline\">\r\n                  <input type=\"password\" id=\"typeText2\" name='cvv' className=\"form-control form-control-lg\"\r\n                    placeholder=\"&#9679;&#9679;&#9679;\"  />\r\n                  <label className=\"form-label\" >Cvv</label>\r\n                </div>\r\n\r\n                <div>\r\n                  <input type=\"text\" id=\"typeText2\" name='totalPrice' className=\"form-control form-control-lg\"\r\n                    value={totalPrice} />\r\n                  <label className=\"form-label\" >Total Price</label>\r\n                </div>\r\n                \r\n              </div>\r\n              <div>\r\n              <button type=\"submit\" className=\"btn btn-info btn-lg btn-rounded\">Pay</button>\r\n              </div>\r\n            </Form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>\r\n        \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Payment;\r\n\r\nexport async function action({ request }) {\r\n  const method = request.method;\r\n  const data = await request.formData();\r\n  const token = getAuthToken();\r\n\r\n  let userData = {\r\n      userId: data.get('id'),\r\n      cardNumber: data.get('cardNumber'),\r\n      cardHolderName: data.get('cardHolderName'),\r\n      expiryDate: data.get('expiryDate'),\r\n      cvv: data.get('cvv'),\r\n      totalPrice: data.get('totalPrice'),\r\n \r\n\r\n  }\r\n  console.log(\"JSON.stringify(eventData): \" + JSON.stringify(userData));\r\n\r\n  let url = process.env.REACT_APP_BASEURL + 'AddPayment'\r\n\r\n  console.log(\"method: \" + method)\r\n  console.log(\"URK: \" + url)\r\n\r\n\r\n  console.log(\"userData: \" + JSON.stringify(userData))\r\n\r\n  var config = {};\r\n\r\n  if (token) {\r\n    config = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token,\r\n    }\r\n  } else {\r\n    config = {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }\r\n  const response = await fetch(url, {\r\n    method: method,\r\n    headers: config,\r\n    body: JSON.stringify(userData)\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw json({ message: 'Could not create User' }, { status: 500 });\r\n  } else {\r\n    if (token) {\r\n      const resData = await response.json();\r\n       alert(\"Payment Done\");\r\n\r\n      return redirect('/productlist');\r\n    } else {\r\n      \r\n      return redirect('/login');\r\n    }\r\n\r\n  }\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}